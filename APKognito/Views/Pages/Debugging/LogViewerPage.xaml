<Page
    x:Class="APKognito.Views.Pages.Debugging.LogViewerPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:local="clr-namespace:APKognito.Views.Pages.Debugging"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:ui="http://schemas.lepo.co/wpfui/2022/xaml"
    Title="LogViewerPage"
    Margin="-30,0"
    d:DataContext="{d:DesignInstance local:LogViewerPage,
                                     IsDesignTimeCreatable=True}"
    d:DesignHeight="800"
    d:DesignWidth="800"
    ui:Design.Background="{DynamicResource ApplicationBackgroundBrush}"
    ui:Design.Foreground="{DynamicResource TextFillColorPrimaryBrush}"
    Foreground="{DynamicResource TextFillColorPrimaryBrush}"
    ScrollViewer.CanContentScroll="False"
    mc:Ignorable="d">

    <Grid Margin="0,10">
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="*" />
            <ColumnDefinition Width="auto" />
            <ColumnDefinition Width="*" />
        </Grid.ColumnDefinitions>

        <GridSplitter
            Grid.Column="1"
            Width="5"
            Margin="0,-10,0,-10"
            Panel.ZIndex="5"
            Background="{DynamicResource ApplicationBackgroundBrush}"
            BorderBrush="#444c56"
            BorderThickness="1,0,1,0"
            ResizeBehavior="PreviousAndNext" />

        <ui:Card
            Grid.Column="0"
            Margin="0,0,5,0"
            VerticalAlignment="Stretch"
            VerticalContentAlignment="Top">
            <StackPanel>
                <ui:Button
                    Margin="0,0,0,10"
                    HorizontalAlignment="Stretch"
                    Command="{Binding ViewModel.LoadLogpackCommand}"
                    Content="Load Logpack" />

                <ui:Button
                    Margin="0,0,0,10"
                    HorizontalAlignment="Stretch"
                    Content="" />

                <Separator />
            </StackPanel>
        </ui:Card>

        <ui:Card
            Grid.Column="2"
            Margin="5,0,0,0"
            VerticalAlignment="Stretch"
            VerticalContentAlignment="Top">
            <ListBox ItemsSource="{Binding ViewModel.LogLines}" VirtualizingPanel.ScrollUnit="Pixel">
                <ListBox.ItemTemplate>
                    <DataTemplate>
                        <Grid>
                            <Grid.RowDefinitions>
                                <RowDefinition />
                                <RowDefinition />
                            </Grid.RowDefinitions>

                            <Label Content="{Binding LogTime}" />
                            <ui:TextBlock Grid.Row="1" Text="{Binding LogMessage}" />
                        </Grid>
                    </DataTemplate>
                </ListBox.ItemTemplate>
            </ListBox>
        </ui:Card>
    </Grid>
</Page>